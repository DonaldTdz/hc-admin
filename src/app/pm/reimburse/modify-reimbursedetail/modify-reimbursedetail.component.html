<div class="padding-bottom-45">
  <div class="modal-header">
    <div class="modal-title">新增报销明细</div>
  </div>
  <form nz-form [formGroup]="form" #validateForm="ngForm" (ngSubmit)="save()" *ngIf="reimburseDetail">
    <nz-form-item nz-row>
      <nz-form-label [nzSm]="5" class="labelPadding" nzRequired="true" [nzXs]="24">费用发生日期</nz-form-label>
      <nz-form-control [nzSm]="19" class="controlPadding" nzHasFeedback>
        <nz-date-picker [nzStyle]='{width:"100%"}' placeholder="请选择费用发生日期" formControlName="happenDate"
          [(ngModel)]="reimburseDetail.happenDate"></nz-date-picker>
        <nz-form-explain *ngIf="(form.get('happenDate')?.dirty && form.get('happenDate')?.errors)
          ">费用发生日期不能为空
        </nz-form-explain>
      </nz-form-control>
    </nz-form-item>
    <nz-form-item nz-row>
      <nz-form-label [nzSm]="5" class="labelPadding" nzRequired [nzXs]="24">费用类型</nz-form-label>
      <nz-form-control [nzSm]="19" class="controlPadding" nzHasFeedback>
        <nz-select [nzPlaceHolder]="'请选择费用类型'" formControlName="type" [(ngModel)]="reimburseDetail.type"
          [nzShowSearch]="true" style="width:100%;">
          <nz-option *ngFor="let i of typeList" [nzLabel]="i.text" [nzValue]="i.value">
          </nz-option>
        </nz-select>
        <nz-form-explain *ngIf="(form.get('type')?.dirty && form.get('type')?.errors)
          ">费用类型不能为空
        </nz-form-explain>
      </nz-form-control>
    </nz-form-item>
    <nz-form-item nz-row>
      <nz-form-label [nzSm]="5" [nzXs]="24" class="labelPadding" nzRequired>发生地点</nz-form-label>
      <nz-form-control [nzSm]="19" class="controlPadding" nzHasFeedback>
        <textarea nz-input rows="2" formControlName="place" placeholder="请输入发生地点"
          [(ngModel)]="reimburseDetail.place"></textarea>
        <nz-form-explain *ngIf="(form.get('place')?.dirty && form.get('place')?.errors)">发生地点不能为空且不能超过100个字符
        </nz-form-explain>
      </nz-form-control>
    </nz-form-item>
    <nz-form-item nz-row>
      <nz-form-label [nzSm]="5" class="labelPadding" nzRequired [nzXs]="24">金额(元)</nz-form-label>
      <nz-form-control [nzSm]="19" class="controlPadding" nzHasFeedback>
        <nz-input-number formControlName="amount" nzPrecision="2" nzMin="0" nzMax="99999999999999" style="width:100%"
          [(ngModel)]="reimburseDetail.amount">
        </nz-input-number>
        <nz-form-explain *ngIf="(form.get('amount')?.dirty && form.get('amount')?.errors)">金额不能为空</nz-form-explain>
      </nz-form-control>
    </nz-form-item>
    <nz-form-item nz-row>
      <nz-form-label [nzSm]="5" [nzXs]="24" nzRequired="true" class="labelPadding">客户单位</nz-form-label>
      <nz-form-control [nzSm]="19" nzHasFeedback>
        <input nz-input formControlName="customer" [(ngModel)]="reimburseDetail.customer">
        <nz-form-explain *ngIf="(form.get('customer')?.dirty && form.get('customer')?.errors)">字符长度小于等于100
        </nz-form-explain>
      </nz-form-control>
    </nz-form-item>
    <nz-form-item nz-row>
      <nz-form-label [nzSm]="5" [nzXs]="24">票据张数</nz-form-label>
      <nz-form-control [nzSm]="19" nzHasFeedback>
        <nz-input-number formControlName="invoiceNum" nzPrecision="0" nzMin="0" nzMax="100" style="width:100%"
          [(ngModel)]="reimburseDetail.invoiceNum"></nz-input-number>
        <nz-form-explain *ngIf="(form.get('invoiceNum')?.dirty && form.get('invoiceNum')?.errors)">请输入票据张数
        </nz-form-explain>
      </nz-form-control>
    </nz-form-item>
    <nz-form-item nz-row>
      <nz-form-label [nzSm]="5" [nzXs]="24" class="labelPadding">费用说明</nz-form-label>
      <nz-form-control [nzSm]="19" class="controlPadding" nzHasFeedback>
        <textarea nz-input rows="2" formControlName="desc" placeholder="请输入费用说明"
          [(ngModel)]="reimburseDetail.desc"></textarea>
        <nz-form-explain *ngIf="(form.get('desc')?.dirty && form.get('desc')?.errors)">费用说明不能超过250个字符
        </nz-form-explain>
      </nz-form-control>
    </nz-form-item>
    <div class="modal-footer">
      <button nz-button type="button" [disabled]="saving" (click)="close()">
        {{l("取消")}}
      </button>
      <button nz-button [nzType]="'primary'" type="submit" [disabled]="!validateForm.valid||saving">
        保存
      </button>
    </div>
  </form>
</div>