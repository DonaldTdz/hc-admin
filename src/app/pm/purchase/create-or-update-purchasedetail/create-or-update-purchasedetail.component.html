<div class="padding-bottom-45">
  <div class="modal-header">
    <div class="modal-title">{{title}}</div>
  </div>
  <form nz-form [formGroup]="form" #validateForm="ngForm" (ngSubmit)="save()" *ngIf="purchaseDetail">
    <nz-form-item nz-row>
      <nz-form-label nz-col [nzSm]="5" [nzXs]="24" nzRequired>供应商</nz-form-label>
      <nz-form-control [nzSm]="19" nzHasFeedback>
        <nz-select formControlName="supplierId" [nzPlaceHolder]="'请选择供应商'" [(ngModel)]="purchaseDetail.supplierId"
          [nzShowSearch]="true" style="width:100%;">
          <nz-option *ngFor="let i of supplierList" [nzLabel]="i.text" [nzValue]="i.value">
          </nz-option>
        </nz-select>
        <nz-form-explain *ngIf="(form.get('supplierId')?.dirty && form.get('supplierId')?.errors)
          ">请选择供应商
        </nz-form-explain>
      </nz-form-control>
    </nz-form-item>
    <nz-form-item nz-row>
      <nz-form-label nz-col [nzSm]="5" [nzXs]="24">项目明细</nz-form-label>
      <nz-form-control [nzSm]="19" nzHasFeedback>
        <nz-select formControlName="projectDetailId" [nzPlaceHolder]="'请选择项目明细'"
          [(ngModel)]="purchaseDetail.projectDetailId" [nzShowSearch]="true" style="width:100%;"
          (ngModelChange)="getPurchaseNum()">
          <nz-option *ngFor="let i of projectDetailList" [nzLabel]="i.text" [nzValue]="i.value">
          </nz-option>
        </nz-select>
      </nz-form-control>
    </nz-form-item>
    <nz-form-item nz-row>
      <nz-form-label nz-col [nzSm]="5" [nzXs]="24">采购数量</nz-form-label>
      <nz-form-control [nzSm]="19" nzHasFeedback>
        <nz-input-number formControlName="num" style="width:25%" placeholder="采购数量" [(ngModel)]="purchaseDetail.num">
        </nz-input-number>
      </nz-form-control>
    </nz-form-item>
    <nz-form-item nz-row>
      <nz-form-label nz-col [nzSm]="5" [nzXs]="24">采购单价(元)</nz-form-label>
      <nz-form-control [nzSm]="19" nzHasFeedback>
        <nz-input-number formControlName="price" style="width:25%" placeholder="请输入采购单价"
          [(ngModel)]="purchaseDetail.price">
        </nz-input-number>
      </nz-form-control>
    </nz-form-item>
    <div class="modal-footer">
      <button nz-button type="button" [disabled]="saving" (click)="close()">
        {{l("Cancel")}}
      </button>
      <button nz-button [nzType]="'primary'" type="submit" [disabled]="!validateForm.valid||saving">
        保存
      </button>
    </div>
  </form>
</div>