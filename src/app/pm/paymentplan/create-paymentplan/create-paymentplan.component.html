<div class="padding-bottom-45">
  <div class="modal-header">
    <div class="modal-title">新增回款计划</div>
  </div>
  <form nz-form [formGroup]="form" #validateForm="ngForm" (ngSubmit)="save()" *ngIf="paymentPlan">
    <nz-form-item nz-row>
      <nz-form-label nz-col [nzSm]="5" [nzXs]="24" nzRequired>计划时间</nz-form-label>
      <nz-form-control [nzSm]="19" nzHasFeedback>
        <nz-date-picker placeholder="请选择计划时间" formControlName="planTime" [(ngModel)]="paymentPlan.planTime">
        </nz-date-picker>
        <nz-form-explain *ngIf="(form.get('planTime')?.dirty && form.get('planTime')?.errors)
            ">请选择计划时间
        </nz-form-explain>
      </nz-form-control>
    </nz-form-item>
    <nz-form-item nz-row>
      <nz-form-label nz-col [nzSm]="5" nzRequired="true" [nzXs]="24">回款金额(元)</nz-form-label>
      <nz-form-control [nzSm]="19" nzHasFeedback>
        <nz-input-number formControlName="amount" [nzPrecision]='2' style="width:100%" placeholder="回款金额"
          [(ngModel)]="paymentPlan.amount">
        </nz-input-number>
        <nz-form-explain *ngIf="(form.get('amount')?.dirty && form.get('amount')?.errors)
        ">回款金额不能为空且不能超过18位
        </nz-form-explain>
      </nz-form-control>
    </nz-form-item>
    <nz-form-item nz-row>
      <nz-form-label nz-col [nzSm]="5" [nzXs]="24" nzRequired>回款状态</nz-form-label>
      <nz-form-control [nzSm]="19" nzHasFeedback>
        <!-- <nz-select formControlName="status" [nzPlaceHolder]="'请选择回款状态'" [(ngModel)]="paymentPlan.status"
          style="width:100%;">
          <nz-option *ngFor="let i of statuss" [nzLabel]="i.text" [nzValue]="i.value">
          </nz-option>
        </nz-select> -->
        <nz-switch [(ngModel)]="paymentPlan.status" formControlName="status" nzCheckedChildren="已回款"
          nzUnCheckedChildren="未回款"></nz-switch>
      </nz-form-control>
    </nz-form-item>
    <nz-form-item nz-row>
      <nz-form-label nz-col [nzSm]="5" nzRequired [nzXs]="24">回款时间</nz-form-label>
      <nz-form-control [nzSm]="19" nzHasFeedback>
        <nz-date-picker placeholder="请选择回款时间" formControlName="paymentTime" [(ngModel)]="paymentPlan.paymentTime">
        </nz-date-picker>
      </nz-form-control>
    </nz-form-item>
    <nz-form-item nz-row>
      <nz-form-label nz-col [nzSm]="5" [nzXs]="24">回款描述</nz-form-label>
      <nz-form-control [nzSm]="19" nzHasFeedback>
        <textarea nz-input rows="2" formControlName="desc" placeholder="请输入回款描述"
          [(ngModel)]="paymentPlan.desc"></textarea>
        <nz-form-explain *ngIf="(form.get('desc')?.dirty && form.get('desc')?.errors)
        ">回款描述不能超过250个字符
        </nz-form-explain>
      </nz-form-control>
    </nz-form-item>
    <div class="modal-footer">
      <button nz-button type="button" [disabled]="saving" (click)="close()">
        {{l("Cancel")}}
      </button>
      <button nz-button [nzType]="'primary'" type="submit" [disabled]="!validateForm.valid||saving">
        保存
      </button>
    </div>
  </form>
</div>
